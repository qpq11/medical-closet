# medical-closet
Проект по предмету ПЦП (ФРКТ 4 семестр, 2025 г.)
## Цель проекта
Создать устройство, позволяющее автоматизировать процесс хранения лекарств
## Задачи
* реализовать трёхзвенную модель архитектуры (интерфейс - HTML, CSS; бизнес-логика - PHP; база данных - mysql) 
* подобрать электронные компонентов
* реализовать устройство на макетной плате
* спроектровать корпус устройства в SolidWorks
* вырезать все грани корпуса на лазере
## Функционал устройства
Данный проект представляет собой медицинский шкаф, позволяющий автоматизировать процесс хранения лекарств. Чтобы добавить лекарство в шкаф, пользователь должен ввести пароль, срок годности лекарства, номер заполняемой ячейки, штрихкод (можно внести с помощью сканера штрих кодов) на веб-страничке <ins> http://host_ip/index.html</ins> и нажать кнопку "Подтвердить". Для удаления лекарства нужно нажать кнопку "Удалить лекарство", на открывшейся страничке указать, из какой ячейки оно будет извлечено.

Чтобы проверить, забирал ли кто-либо лекарство из ячейки, не создавая соответствующую запись, можно нажать кнопку "Проверить целостность". На открывшейся страничке ввести номер интересующей ячейки. Если изменение содержимого было произведено недетерминированно, появится сообщение, уведомляющее об этом, иначе - о целостности содержимого ячейки.  

Если в какой-либо ячейке появится просроченное лекарство, то в ней замигает светодиод. Это будет продолжаться до тех пор, пока просроченное лекарство не будет извлечено.

В шкаф встроен датчик температуры, данные с которого отображаются на дисплее,   
## Описание решения поставленных задач
Для разработки ПО была выбрана трёхзвенная модель архитектуры: в качестве  интерфейса используется HTML веб-форма (файл [index.htm](https://github.com/qpq11/medical-closet/blob/main/index.html)), через котрую осуществляется ввод данных пользователем. Имеются поля  Чтобы добавить лекарство в шкаф, пользователь должен в поля которой пользователь должен занести свой id, срок годности лекарства, штрихкод (можно внести с помощью сканера штрих кодов). для хранения информации о пользователях, содержимом ячеек и сроках годности лекарств используется база данных MySQL. Взаимодействие  между контроллером и сервером осуществляется путем подключения ESP32 и компьютера к одной локальной сети. Разворачивается HTML-страница (файл index.html), с которой осуществляется ввод данных о лекарствах (срок годности, штрихкод) и о человеке, который его осуществляет (id). Чтобы забрать лекарство, пользователь должен нажать кнопку "удалить лекарство" (происходит переход на страницу "delete_form.html"), указать номер ячейки, из которой нужно забрать лекарство, тогда соответствующая запись будет удалена из базы данных после ввода правильного пароля (проверка в delete.php). При попытке ввода неверного пароля 3 раза подряд происходит перенаправление на страницу блокировки (blocked.html) на определенный срок, по истечении которого формы ввода и удаления станут вновь доступны (отказ доступа обеспечивает скрипт check_block.php). Номер ячейки извлекается из json-файла, данные в который парсятся с помощью get_sensors.php. Также датчик температуры периодически снимает информацию о температуре окружающей среды и подает сигнал при превышении допустимой для хранения содержимого температуры (текущее значение температуры выводится на экран). Чтобы открыть шкаф, необходимо ввести пароль. Если в базе данных обнаружено просроченное лекарство (сроки годности лекарств отслеживаются с помощью api.php), то светодиод в соответствующей ячейке мигает. Если затем его извлекут (осознанно удалят из таблицы), то светодиод перестанет мигать. Пользователь также может в любой момент проверить целостность содержимого каждой из ячеек (форма checker.html); при значительном (по сравнению с прошлыми показаниями датчиков) изменении расстояния пользователь получит предупреждение о возможном изменении содержимого (это может произойти, например, если лекарство разбилось внутри ячейки, перевернулось или же было взято из шкафа без ввода данных об удалении; осуществляется скриптом check.php).

## Компоненты, использованные инструменты/машины
### Компонетны:
* датчики УЗ HC-SR04
* датчик температуры 18B20 в корпусе
* микроконтроллер ESP-WROOM-32
* дисплей HW-069
* 3 светодиода
* 3 резистора 240 Ом
* сканер штрих кодов
## Используемые машины:

## Возникшие проблемы

## Фото устройства

## Демонстрация работы
